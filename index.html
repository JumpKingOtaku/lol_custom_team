<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>LoL カスタム チーム分けツール</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="script.js"></script>
</head>
<body>
<div class="container">
    <h1>LoL カスタム チーム分けツール</h1>

    <section class="description">
        <p>
            10人のプレイヤー情報（名前・レーンごとのランク・希望レーン・備考）を入力して、
            Blue / Red のチームをレーン指定で自動生成します。
        </p>
        <ul>
            <li>各プレイヤーのレーンごとのランク（TOP / JG / MID / ADC / SUP）を指定</li>
            <li>希望レーンに入っているレーンにしか配置されません</li>
            <li>対面レーンのランク差を最小化</li>
            <li>チーム平均ランクも近づける</li>
        </ul>
        <p>
            ※ 第1〜第5希望のどこにも入っていないレーンには絶対に配置されません。<br>
            ※ 各レーンに最低2人は希望者がいるようにしてください（いないと組めません）。<br>
            ※ 「チーム生成」ボタンごとに重み付けが異なり、押すたびに条件を満たしつつランダムに再生成されます。
        </p>
    </section>

    <section class="players">
        <h2>プレイヤー情報</h2>
        <div class="table-wrapper">
            <table id="playerTable">
                <thead>
                <tr>
                    <th>#</th>
                    <th>名前</th>
                    <th>
                        TOPランク
                        <img src="lol-top-iconpng.png" alt="TOP" class="lane-icon">
                    </th>
                    <th>
                        JGランク
                        <img src="lol-jungle-iconpng.png" alt="JG" class="lane-icon">
                    </th>
                    <th>
                        MIDランク
                        <img src="lol-mid-iconpng.png" alt="MID" class="lane-icon">
                    </th>
                    <th>
                        ADCランク
                        <img src="lol-adc-iconpng.png" alt="ADC" class="lane-icon">
                    </th>
                    <th>
                        SUPランク
                        <img src="lol-support-iconpng.png" alt="SUP" class="lane-icon">
                    </th>
                    <th>第1希望</th>
                    <th>第2希望</th>
                    <th>第3希望</th>
                    <th>第4希望</th>
                    <th>第5希望</th>
                    <th>備考</th>
                </tr>
                </thead>
                <tbody id="playerTableBody">
                <!-- script.js で 10行分を生成 -->
                </tbody>
            </table>
        </div>
    </section>



    <section class="actions">
        <div class="actions-main">
            <button id="btnNormal">通常生成</button>
            <button id="btnPref">希望レーン重視</button>
            <button id="btnLane">対面ランク重視</button>
            <button id="btnAvg">チーム平均重視</button>
            <!-- secondary を外して他の生成ボタンと同じ青色に -->
            <button id="btnRandom">希望レーン内で完全ランダム</button>
        </div>

        <div class="actions-sub">
            <button id="advancedSettingsButton" class="secondary">詳細設定</button>
            <button id="laneCountButton" class="secondary">レーン人数確認</button>
            <button id="playerRegistryButton" class="secondary">プレイヤーリスト管理</button>
        </div>
        <div id="message" class="message"></div>
    </section>



    <!-- ★ 詳細設定 -->
    <section id="advancedSettingsSection" class="advanced-settings hidden">
        <h2>詳細設定（同じチーム / 別チーム 条件）</h2>
        <p class="advanced-note">
            上の「プレイヤー情報」で設定した名前から選択できます。<br>
            使わない行は空白のままで構いません。
        </p>
        <div class="advanced-grid">

            <div class="advanced-block">
                <h3>同じチームにしたいグループ</h3>
                <div class="advanced-rows">
                    <div class="advanced-row">
                        <label>グループ1:</label>
                        <select id="sameGroup-1-1"></select>
                        <select id="sameGroup-1-2"></select>
                        <select id="sameGroup-1-3"></select>
                        <select id="sameGroup-1-4"></select>
                        <select id="sameGroup-1-5"></select>
                    </div>
                    <div class="advanced-row">
                        <label>グループ2:</label>
                        <select id="sameGroup-2-1"></select>
                        <select id="sameGroup-2-2"></select>
                        <select id="sameGroup-2-3"></select>
                        <select id="sameGroup-2-4"></select>
                        <select id="sameGroup-2-5"></select>
                    </div>
                    <div class="advanced-row">
                        <label>グループ3:</label>
                        <select id="sameGroup-3-1"></select>
                        <select id="sameGroup-3-2"></select>
                        <select id="sameGroup-3-3"></select>
                        <select id="sameGroup-3-4"></select>
                        <select id="sameGroup-3-5"></select>
                    </div>
                </div>
                <p class="advanced-note">
                    1行につき2人以上選ぶと「同じチームになるグループ」として扱います。<br>
                    例: グループ1で「プレイヤーA」「プレイヤーB」「プレイヤーC」を選ぶと、
                    その3人は必ず同じチームになります。
                </p>

            </div>

            <div class="advanced-block">
                <h3>必ず別チームにしたい組み合わせ</h3>
                <div class="advanced-rows">
                    <div class="advanced-row">
                        <label>条件1:</label>
                        <select id="diffPair-1-A"></select>
                        <span>と</span>
                        <select id="diffPair-1-B"></select>
                    </div>
                    <div class="advanced-row">
                        <label>条件2:</label>
                        <select id="diffPair-2-A"></select>
                        <span>と</span>
                        <select id="diffPair-2-B"></select>
                    </div>
                    <div class="advanced-row">
                        <label>条件3:</label>
                        <select id="diffPair-3-A"></select>
                        <span>と</span>
                        <select id="diffPair-3-B"></select>
                    </div>
                    <div class="advanced-row">
                        <label>条件4:</label>
                        <select id="diffPair-4-A"></select>
                        <span>と</span>
                        <select id="diffPair-4-B"></select>
                    </div>
                    <div class="advanced-row">
                        <label>条件5:</label>
                        <select id="diffPair-5-A"></select>
                        <span>と</span>
                        <select id="diffPair-5-B"></select>
                    </div>
                </div>
                <p class="advanced-note">
                    両方に同じ名前を選ぶことはできません。<br>
                    例: 条件1で「プレイヤーA」と「プレイヤーB」を選ぶと、
                    その2人は必ず別チームになります。
                </p>

            </div>
        </div>
    </section>

    <section id="laneCountSection" class="lane-count hidden">
        <h2>レーン人数</h2>
        <p class="lane-count-note">
            ※ 第1〜第5希望のどこかに含まれている人数です（1人が複数順位に書いていても1カウント）。</p>
        <ul id="laneCountList"></ul>
    </section>

    <!-- ★ プレイヤーリスト -->
    <section id="playerRegistrySection" class="player-registry hidden">
        <h2>プレイヤーリスト</h2>
        <p class="player-registry-note">
            よく使うプレイヤーを登録しておくと、上の表の「登録プレイヤーから選択」から呼び出せます。<br>
            ランクや備考などをあらかじめ登録しておけば、ゲームごとには希望レーンだけ入力すればOKです。
        </p>

        <!-- 登録フォーム（script.jsで中身を生成） -->
        <div class="player-registry-form" id="playerRegistryForm"></div>

        <!-- 登録済み一覧 -->
        <div class="player-registry-list">
            <h3>登録済みプレイヤー</h3>
            <div class="table-wrapper">
                <table id="playerRegistryTable">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>名前</th>
                        <th>
                            TOPランク
                            <img src="lol-top-iconpng.png" alt="TOP" class="lane-icon">
                        </th>
                        <th>
                            JGランク
                            <img src="lol-jungle-iconpng.png" alt="JG" class="lane-icon">
                        </th>
                        <th>
                            MIDランク
                            <img src="lol-mid-iconpng.png" alt="MID" class="lane-icon">
                        </th>
                        <th>
                            ADCランク
                            <img src="lol-adc-iconpng.png" alt="ADC" class="lane-icon">
                        </th>
                        <th>
                            SUPランク
                            <img src="lol-support-iconpng.png" alt="SUP" class="lane-icon">
                        </th>
                        <th>第1希望</th>
                        <th>第2希望</th>
                        <th>第3希望</th>
                        <th>第4希望</th>
                        <th>第5希望</th>
                        <th>備考</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- script.jsで生成 -->
                    </tbody>
                </table>


            </div>
        </div>

        <!-- プレイヤーリスト専用 JSON 入出力 -->
        <div class="player-registry-json">
            <p class="player-registry-note">
                プレイヤーリストだけをJSONファイルとして保存／復元できます。<br>
                ボタンでファイル保存・読み込み、または下のエリアにドラッグ＆ドロップしてください。
            </p>

            <div class="player-registry-json-buttons">
                <button id="playerJsonExportButton" class="secondary">JSONファイル保存</button>
                <button id="playerJsonImportButton" class="secondary">JSONファイル読み込み</button>
                <!-- クリック用の非表示 input -->
                <input id="playerJsonFileInput" type="file" accept="application/json" style="display:none;">
            </div>

            <!-- ドラッグ＆ドロップゾーン -->
            <div id="playerJsonDropZone" class="json-drop-zone">
                JSONファイルをここにドラッグ＆ドロップして読み込み
            </div>
        </div>

    </section>

    <section id="resultSection" class="result hidden">
        <h2>チーム分け結果</h2>
        <div class="team-container">
            <div class="team-card blue">
                <h3>Blue Team</h3>
                <p class="team-average" id="blueAverage"></p>
                <ul id="blueList" class="team-list"></ul>
            </div>
            <div class="team-card red">
                <h3>Red Team</h3>
                <p class="team-average" id="redAverage"></p>
                <ul id="redList" class="team-list"></ul>
            </div>
        </div>
        <p class="score-info">
            評価スコア（小さいほどバランスが良い）: <span id="scoreValue"></span>

            	<button id="undoResultButton" class="undo-result-button" type="button">
                直前の結果に戻す
                </button>
        </p>


    <!-- ★ 評価スコアの内訳表示エリアを追加 -->
    <div id="scoreDetail" class="score-detail"></div>

    </section>

    <!-- （この JSONエリア セクションは削除） -->

</div>
</body>
</html>

